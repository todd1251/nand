function AndView(b,c,d){var a=d.createPath();a.moveTo({x:0,y:0});a.lineTo({x:c.wideSegmentWidth,y:0});var f={x:c.gateWidth,y:c.halfHeight};a.arcTo({x:c.wideSegmentWidth+1,y:0},f);a=b.decorate(a,c,d);f.x=a.bounds.width;a.arcTo({x:c.wideSegmentWidth+1,y:c.height},{x:c.wideSegmentWidth,y:c.height});a.lineTo({x:0,y:c.height});a.closePath();a.alignmentCentre={x:c.gateWidth/2,y:c.halfHeight};b=c.height/4;a.inputs=[{x:0,y:b},{x:0,y:c.height-b}];a.outputs=[f];return a};function AppearanceProportionalToDimensions(b,c){c=c||{};this.stroke={width:c.strokeWidth||b.width/25,colour:c.strokeColour||"black"};this.wireStrokeWidth=.5*this.stroke.width;this.fill={colour:c.fillColour||"white"}}AppearanceProportionalToDimensions.prototype.createPath=function(){return new paper.Path({strokeWidth:this.stroke.width,strokeColor:this.stroke.colour,fillColor:this.fill.colour})};function BufferView(b,c,d){var a=d.createPath();a.moveTo({x:0,y:0});var f={x:c.wideSegmentWidth-d.stroke.width,y:c.halfHeight};a.lineTo(f);a=b.decorate(a,c,d);f.x=a.bounds.width;a.lineTo({x:0,y:c.height});a.closePath();a.alignmentCentre={x:c.wideSegmentWidth/2,y:c.halfHeight};a.inputs=[{x:0,y:c.halfHeight}];a.outputs=[f];return a};function CircuitView(b,c,d){b=b.map(function(a){return new a(c,d)});for(var a=0;a<b.length;a++){var f=b[a];if(0==a)f.position={x:0,y:0};else{var e=b[a-1];f.position={x:e.outputs[0].x-e.inputs[0].x,y:e.outputs[0].y-e.inputs[0].y}}}a=new paper.Group(b);a.inputs=b[0].inputs;console.log(18);a.outputs=[{x:b[b.length-1].outputs[0].x+b[b.length-2].outputs[0].x-b[b.length-2].inputs[0].x,y:b[b.length-1].outputs[0].y+b[b.length-2].outputs[0].y-b[b.length-2].inputs[0].y+18}];console.log(a.inputs);console.log(a.outputs);
return a};function DimensionsProportionalToWidth(b){this.width=b=b||100;this.wireWidth=b/5;this.gateWidth=b-2*this.wireWidth;this.height=4*this.gateWidth/5;this.halfHeight=this.height/2;this.wideSegmentWidth=3*this.gateWidth/5;this.narrowSegmentWidth=2*this.gateWidth/5;this.inverterRadius=this.gateWidth/12};function GateView(b,c,d){b=new b(c,d);var a=c.width/2-b.alignmentCentre.x+b.inputs[0].x/2,f=[];f.push(b);c=[{x:c.width-a+b.inputs[0].x,y:b.outputs[0].y}];for(var e=new paper.Path.Line({from:b.outputs[0],to:c[0],strokeWidth:d.wireStrokeWidth,strokeColor:d.stroke.colour}),g=[],h=0;h<b.inputs.length;h++){var k=b.inputs[h];g[h]={x:k.x-a,y:k.y};f.push(new paper.Path.Line({from:g[h],to:{x:k.x,y:k.y},strokeWidth:d.wireStrokeWidth,strokeColor:d.stroke.colour}))}f.push(e);b=new paper.Group(f);b.inputs=g;b.outputs=
c;return b};function render(){function b(a){return GateView.bind(null,a)}function c(){}function d(){}paper.project.activeLayer.removeChildren();c.prototype.decorate=function(a,b,c){b=2*b.inverterRadius;a.arcBy({x:b,y:0},!1);a.arcBy({x:-b,y:0},!0);a.arcBy({x:b,y:0},!0);a.arcBy({x:-b,y:0},!1);return a};d.prototype.decorate=function(a,b,c){return a};var a=b(BufferView.bind(null,new d)),f=b(BufferView.bind(null,new c)),e=b(AndView.bind(null,new d)),g=b(AndView.bind(null,new c)),a=CircuitView.bind(null,[a,f]),e=CircuitView.bind(null,
[e,g]),e=CircuitView.bind(null,[a,e]),g=new DimensionsProportionalToWidth,a=new AppearanceProportionalToDimensions(g);e(g,a).position={x:300,y:100}}
window.addEventListener("load",function(){var b=document.getElementById("paper");paper.setup(b);paper.view.onFrame=function(b){paper.view.draw()};paper.view.onResize=function(b){render()};render();(function(){function b(a){d=null}var d,a=new paper.Tool;a.attach("mousedown",function(a){d=a.point});a.attach("mousedrag",function(a){a=a.point;paper.view.center=new paper.Point(paper.view.center.x-(a.x-d.x),paper.view.center.y-(a.y-d.y))});a.attach("mouseup",b);a.attach("mouseout",b);return a})();(function(b){var d=
0;b.addEventListener("mousewheel",function(a){var b=d+a.wheelDelta,c;c=Math.pow(1.001,b);c=Math.min(Math.max(c,.01),100);var g=paper.view.zoom;if(c!=g){var h=g/c,k=paper.view.viewToProject({x:a.offsetX,y:a.offsetY}),g=paper.view.center,l=k.subtract(g),h=k.subtract(l.multiply(h)).subtract(g);paper.view.center=g.add(h);d=b;paper.view.zoom=c}a.preventDefault();return!1})})(b)});function OrView(b,c,d,a){var f=d.gateWidth/7,e=a.createPath();e.moveTo({x:a.stroke.width/2,y:0});e.lineTo({x:d.narrowSegmentWidth,y:0});var g={x:d.gateWidth,y:d.halfHeight};e.arcTo({x:d.narrowSegmentWidth+d.wideSegmentWidth/2,y:d.halfHeight/4},g);e=c.decorate(e,d,a);g.x=e.bounds.width;e.arcTo({x:d.narrowSegmentWidth+d.wideSegmentWidth/2,y:d.height-d.halfHeight/4},{x:d.narrowSegmentWidth,y:d.height});e.lineTo({x:a.stroke.width/2,y:d.height});e.arcTo({x:f,y:d.halfHeight},{x:a.stroke.width/2,y:0});e.closePath();
e=b.decorate(e,d,a);e.alignmentCentre={x:d.gateWidth/2-f/2,y:d.halfHeight};b=d.height/4;e.inputs=[{x:f,y:b},{x:f,y:d.height-b}];e.outputs=[g];return e};function XorDecoration(){}XorDecoration.prototype.decorate=function(b,c,d){var a=c.gateWidth/7,f=d.createPath(),e=2*d.stroke.width,g=1.2*(d.stroke.width/2-e),a=a-e;d=d.stroke.width/10;f.moveTo({x:g+d,y:0});f.lineTo({x:g,y:0});f.arcTo({x:a,y:c.halfHeight},{x:g,y:c.height});f.lineTo({x:g+d,y:c.height});f.arcTo({x:a,y:c.halfHeight},{x:g,y:0});f.lineTo({x:g+d,y:0});f.arcTo({x:a,y:c.halfHeight},{x:g,y:c.height});return new paper.Group([b,f])};
