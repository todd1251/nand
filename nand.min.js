function AndView(a,b){var d=a.height/2,c=new paper.Path.Arc({from:{x:a.wideSegmentWidth,y:0},through:{x:a.width,y:d},to:{x:a.wideSegmentWidth,y:a.height}});c.remove();var c=new paper.Path({segments:[{x:0,y:0},c.segments[0],c.segments[1],c.segments[2],{x:0,y:a.height}],closed:!0,strokeWidth:b.stroke.width,strokeColor:b.stroke.colour,fillColor:b.fill.colour}),e=a.height/4,f=a.width/2,h=new paper.Path.Line({from:{x:-(b.stroke.width/2),y:e},to:{x:-(f+b.stroke.width),y:e},strokeWidth:.6*b.stroke.width,
strokeColor:b.stroke.colour}),e=new paper.Path.Line({from:{x:-(b.stroke.width/2),y:a.height-e},to:{x:-(f+b.stroke.width),y:a.height-e},strokeWidth:.6*b.stroke.width,strokeColor:b.stroke.colour}),d=new paper.Path.Line({from:{x:c.bounds.width,y:d},to:{x:c.bounds.width+f+b.stroke.width/2,y:d},strokeWidth:.6*b.stroke.width,strokeColor:b.stroke.colour}),d=new paper.Group([h,e,c,d]);d.gateWidth=c.bounds.width;return d};function AppearanceProportionalToDimensions(a,b){b=b||{};this.stroke={width:b.strokeWidth||a.width/20,colour:b.strokeColour||"black"};this.fill={colour:b.fillColour||"white"}};function BufferView(a,b){return new paper.Path({segments:[{x:0,y:0},{x:a.wideSegmentWidth,y:a.height/2},{x:0,y:a.height}],closed:!0,strokeWidth:b.stroke.width,strokeColor:b.stroke.colour,fillColor:b.fill.colour})};function DimensionsProportionalToWidth(a){this.width=a=a||100;this.height=4*a/5;this.wideSegmentWidth=3*a/5;this.narrowSegmentWidth=2*a/5;this.inverterRadius=a/12};function GateView(a,b,d,c){a=new a(d,c);var e=d.height/2,f=7*d.width/10,h=new paper.Path.Line({from:{x:a.bounds.width,y:e},to:{x:a.bounds.width+f+c.stroke.width/2,y:e},strokeWidth:.6*c.stroke.width,strokeColor:c.stroke.colour});b?(d=new paper.Path.Line({from:{x:-(c.stroke.width/2),y:e},to:{x:-(f+c.stroke.width),y:e},strokeWidth:.6*c.stroke.width,strokeColor:c.stroke.colour}),h=new paper.Group([d,a,h])):(e=d.height/4,f=d.width/2,b=new paper.Path.Line({from:{x:-(c.stroke.width/2),y:e},to:{x:-(f+c.stroke.width),
y:e},strokeWidth:.6*c.stroke.width,strokeColor:c.stroke.colour}),d=new paper.Path.Line({from:{x:-(c.stroke.width/2),y:d.height-e},to:{x:-(f+c.stroke.width),y:d.height-e},strokeWidth:.6*c.stroke.width,strokeColor:c.stroke.colour}),h=new paper.Group([b,d,a,h]));h.gateWidth=a.bounds.width;return h};function Inverted(a,b,d){a=new a(b,d);d=new InverterView(b,d);d.position={x:a.gateWidth+b.inverterRadius,y:a.bounds.height/2};return new paper.Group([a,d])};function InverterView(a,b){return new paper.Path.Circle({radius:a.inverterRadius,strokeWidth:b.stroke.width,strokeColor:b.stroke.colour,fillColor:b.fill.colour})};function render(){function a(a){return Inverted.bind(null,a)}paper.project.activeLayer.removeChildren();var b=[GateView.bind(null,BufferView,!0),a(GateView.bind(null,BufferView,!0)),AndView,a(AndView),OrView,a(OrView),XorView,a(XorView)],d=b.map(function(a){var b=new DimensionsProportionalToWidth,c=new AppearanceProportionalToDimensions(b);return new a(b,c)}),c=b.map(function(a){var b=new DimensionsProportionalToWidth(150),c=new AppearanceProportionalToDimensions(b);return new a(b,c)}),e=b.map(function(a){var b=
new DimensionsProportionalToWidth(50),c=new AppearanceProportionalToDimensions(b);return new a(b,c)}),b=b.map(function(a){var b=new DimensionsProportionalToWidth(20),c=new AppearanceProportionalToDimensions(b);return new a(b,c)}),f=null,h=null;c.map(function(a){if(null==f||a.bounds.width>f)f=a.bounds.width;if(null==h||a.bounds.height>h)h=a.bounds.height});var g=175,k=100;d.map(function(a){a.position={x:g,y:k};g+=f;g>2.5*f&&(g=175,k+=h+0)});g=825;k=100;c.map(function(a){a.position={x:g,y:k};g+=f+50;
g>4.5*f&&(g=825,k+=h+50)});g=100;k=600;e.map(function(a){a.position={x:g,y:k};g+=f/4+50;g>1.75*f&&(g=100,k+=h/4+50)});g=625;k=100;b.map(function(a){a.position={x:g,y:k};g+=f/4+50;g>1.75*f&&(g=625,k+=h/4+50)})}window.addEventListener("load",function(){var a=document.getElementById("paper");paper.setup(a);paper.view.onFrame=function(a){paper.view.draw()};paper.view.onResize=function(a){render()};render()});function OrView(a,b){var d=a.width/7,c=a.height/2,e=new paper.Path.Arc({from:{x:a.narrowSegmentWidth,y:0},through:{x:a.narrowSegmentWidth+a.wideSegmentWidth/2,y:c/4},to:{x:a.width,y:c}});e.remove();var f=new paper.Path.Arc({from:{x:a.width,y:c},through:{x:a.narrowSegmentWidth+a.wideSegmentWidth/2,y:a.height-c/4},to:{x:a.narrowSegmentWidth,y:a.height}});f.remove();var h=new paper.Path.Arc({from:{x:0,y:a.height},through:{x:d,y:c},to:{x:0,y:0}});h.remove();var e=new paper.Path({segments:[{x:0,y:0},{x:a.narrowSegmentWidth,
y:0},e.segments[0],e.segments[1],f.segments[0],f.segments[1],{x:a.narrowSegmentWidth,y:a.height},{x:0,y:a.height},h.segments[0],h.segments[1]],closed:!0,strokeWidth:b.stroke.width,strokeColor:b.stroke.colour,fillColor:b.fill.colour}),g=a.height/4,h=a.width/2,f=new paper.Path.Line({from:{x:d-b.stroke.width/2,y:g},to:{x:-(h+b.stroke.width),y:g},strokeWidth:.6*b.stroke.width,strokeColor:b.stroke.colour}),d=new paper.Path.Line({from:{x:d-b.stroke.width/2,y:a.height-g},to:{x:-(h+b.stroke.width),y:a.height-
g},strokeWidth:.6*b.stroke.width,strokeColor:b.stroke.colour}),c=new paper.Path.Line({from:{x:e.bounds.width,y:c},to:{x:e.bounds.width+h+b.stroke.width/2,y:c},strokeWidth:.6*b.stroke.width,strokeColor:b.stroke.colour}),c=new paper.Group([f,d,e,c]);c.gateWidth=e.bounds.width;return c};function XorView(a,b){var d=new OrView(a,b),c=d.bounds.height,e=2.5*b.stroke.width,f=new paper.Path.Arc({from:{x:-e,y:0},through:{x:d.gateWidth/7-.85*e,y:c/2},to:{x:-e,y:c}});f.remove();var h=(100<d.gateWidth?2:1)-e,c=new paper.Path({segments:[{x:h,y:0},f.segments[0],f.segments[1],{x:h,y:c}],strokeWidth:b.stroke.width,strokeColor:b.stroke.colour}),c=new paper.Group([d,c]);c.gateWidth=d.gateWidth;c.gapWidth=e;return c};
