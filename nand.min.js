function AndView(c,a,b){b=b.createPath();b.moveTo({x:0,y:0});b.lineTo({x:a.wideSegmentWidth,y:0});b.arcTo({x:a.wideSegmentWidth+1,y:0},{x:a.width,y:a.halfHeight});c(b,a);b.arcTo({x:a.wideSegmentWidth+1,y:a.height},{x:a.wideSegmentWidth,y:a.height});b.lineTo({x:0,y:a.height});b.closePath();return b};function AppearanceProportionalToDimensions(c,a){a=a||{};this.stroke={width:a.strokeWidth||c.width/20,colour:a.strokeColour||"black"};this.fill={colour:a.fillColour||"white"}}AppearanceProportionalToDimensions.prototype.createPath=function(){return new paper.Path({strokeWidth:this.stroke.width,strokeColor:this.stroke.colour,fillColor:this.fill.colour})};function BufferView(c,a,b,e,f){var d=f.createPath();d.moveTo({x:0,y:0});d.lineTo({x:e.wideSegmentWidth,y:e.halfHeight});c(d,e);d.lineTo({x:0,y:e.height});d.closePath();c=f.createPath();c.strokeWidth=.6*f.stroke.width;c.moveTo({x:0,y:e.halfHeight});a(c,e,f);a=f.createPath();a.strokeWidth=.6*f.stroke.width;a.moveTo({x:d.bounds.width,y:e.halfHeight});b(a,e,f);return new paper.Group([d,c,a])};function DimensionsProportionalToWidth(c){this.width=c=c||100;this.height=4*c/5;this.halfHeight=this.height/2;this.wideSegmentWidth=3*c/5;this.narrowSegmentWidth=2*c/5;this.inverterRadius=c/12};function GateView(c,a,b,e){c=new c(b,e);var f=b.height/2,d=b.height/4,l;l=a?7*b.width/10-b.inverterRadius:b.width/2;var h=new paper.Path.Line({from:{x:c.bounds.width,y:f},to:{x:c.bounds.width+l+e.stroke.width/2,y:f},strokeWidth:.6*e.stroke.width,strokeColor:e.stroke.colour});a?(b=new paper.Path.Line({from:{x:-(e.stroke.width/2),y:f},to:{x:-(l+e.stroke.width),y:f},strokeWidth:.6*e.stroke.width,strokeColor:e.stroke.colour}),h=new paper.Group([b,c,h])):(a=new paper.Path.Line({from:{x:-(e.stroke.width/
2),y:d},to:{x:-(l+e.stroke.width),y:d},strokeWidth:.6*e.stroke.width,strokeColor:e.stroke.colour}),b=new paper.Path.Line({from:{x:-(e.stroke.width/2),y:b.height-d},to:{x:-(l+e.stroke.width),y:b.height-d},strokeWidth:.6*e.stroke.width,strokeColor:e.stroke.colour}),h=new paper.Group([a,b,c,h]));h.gateWidth=c.bounds.width;return h};function Inverted(c,a,b){c=new c(a,b);b=new InverterView(a,b);b.position={x:c.gateWidth+a.inverterRadius,y:c.bounds.height/2};return new paper.Group([c,b])};function InverterView(c,a){return new paper.Path.Circle({radius:c.inverterRadius,strokeWidth:a.stroke.width,strokeColor:a.stroke.colour,fillColor:a.fill.colour})};function render(){function c(a,b){return GateView.bind(null,a,b)}function a(a,b){}function b(a,b){var c=2*b.inverterRadius;a.arcBy({x:c,y:0},!1);a.arcBy({x:-c,y:0},!0);a.arcBy({x:c,y:0},!0);a.arcBy({x:-c,y:0},!1)}function e(a,b,c){a.lineTo({x:-(7*b.width/10-b.inverterRadius+c.stroke.width),y:b.halfHeight})}function f(a,b,c){a.lineBy({x:7*b.width/10-b.inverterRadius+c.stroke.width/2,y:0})}paper.project.activeLayer.removeChildren();var d=[BufferView.bind(null,a,e,f),c(AndView.bind(null,a)),BufferView.bind(null,
b,e,f),c(AndView.bind(null,b)),c(OrView.bind(null,a)),XorViewDecorator.bind(null,c(OrView.bind(null,a))),c(OrView.bind(null,b)),XorViewDecorator.bind(null,c(OrView.bind(null,b)))],l=d.map(function(a){var b=new DimensionsProportionalToWidth,c=new AppearanceProportionalToDimensions(b);return new a(b,c)}),h=d.map(function(a){var b=new DimensionsProportionalToWidth(150),c=new AppearanceProportionalToDimensions(b);return new a(b,c)}),p=d.map(function(a){var b=new DimensionsProportionalToWidth(50),c=new AppearanceProportionalToDimensions(b);
return new a(b,c)}),d=d.map(function(a){var b=new DimensionsProportionalToWidth(20),c=new AppearanceProportionalToDimensions(b);return new a(b,c)}),m=null,n=null;h.map(function(a){if(null==m||a.bounds.width>m)m=a.bounds.width;if(null==n||a.bounds.height>n)n=a.bounds.height});var g=175,k=100;l.map(function(a){a.position={x:g,y:k};g+=m;g>2.5*m&&(g=175,k+=n+0)});g=825;k=100;h.map(function(a){a.position={x:g,y:k};g+=m+50;g>4.5*m&&(g=825,k+=n+50)});g=100;k=600;p.map(function(a){a.position={x:g,y:k};g+=
m/4+50;g>1.75*m&&(g=100,k+=n/4+50)});g=625;k=100;d.map(function(a){a.position={x:g,y:k};g+=m/4+50;g>1.75*m&&(g=625,k+=n/4+50)})}window.addEventListener("load",function(){var c=document.getElementById("paper");paper.setup(c);paper.view.onFrame=function(a){paper.view.draw()};paper.view.onResize=function(a){render()};render()});function OrView(c,a,b){var e=a.width/7,f=a.height/2,d=b.createPath();d.moveTo({x:b.stroke.width/2,y:0});d.lineTo({x:a.narrowSegmentWidth,y:0});d.arcTo({x:a.narrowSegmentWidth+a.wideSegmentWidth/2,y:f/4},{x:a.width,y:f});c(d,a);d.arcTo({x:a.narrowSegmentWidth+a.wideSegmentWidth/2,y:a.height-f/4},{x:a.narrowSegmentWidth,y:a.height});d.lineTo({x:b.stroke.width/2,y:a.height});d.arcTo({x:e,y:f},{x:b.stroke.width/2,y:0});d.closePath();f=a.height/4;c=new paper.Path.Line({from:{x:-(b.stroke.width/2),y:f},
to:{x:e,y:f},strokeWidth:.6*b.stroke.width,strokeColor:b.stroke.colour});a=new paper.Path.Line({from:{x:-(b.stroke.width/2),y:a.height-f},to:{x:e,y:a.height-f},strokeWidth:.6*b.stroke.width,strokeColor:b.stroke.colour});return new paper.Group([c,a,d])};function XorViewDecorator(c,a,b){c=new c(a,b);a=a.width/7;var e=c.bounds.height,f=e/2,d=2.5*b.stroke.width,l=b.createPath();l.strokeCap="square";l.moveTo({x:1-d,y:0});l.lineTo({x:-d,y:0});l.arcTo({x:a-.85*d,y:f},{x:-d,y:e});l.lineTo({x:1-d,y:e});var h=b.createPath();h.strokeCap="square";h.strokeColor="white";h.fillColor=null;h.moveTo({x:b.stroke.width-1-d,y:-b.stroke.width/2});h.arcTo({x:a-.85*d+b.stroke.width,y:f},{x:b.stroke.width-1-d,y:e+b.stroke.width/2});return new paper.Group([l,h,c])};
