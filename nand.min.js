function AndView(d,a,b){var c=b.createPath();c.moveTo({x:0,y:0});c.lineTo({x:a.wideSegmentWidth,y:0});var f={x:a.gateWidth,y:a.halfHeight};c.arcTo({x:a.wideSegmentWidth+1,y:0},f);c=d.decorate(c,a,b);f.x=c.bounds.width;c.arcTo({x:a.wideSegmentWidth+1,y:a.height},{x:a.wideSegmentWidth,y:a.height});c.lineTo({x:0,y:a.height});c.closePath();c.alignmentCentre={x:a.gateWidth/2,y:a.halfHeight};d=a.height/4;c.inputs=[{x:0,y:d},{x:0,y:a.height-d}];c.outputs=[f];return c};function AppearanceProportionalToDimensions(d,a){a=a||{};this.stroke={width:a.strokeWidth||d.width/25,colour:a.strokeColour||"black"};this.wireStrokeWidth=.5*this.stroke.width;this.fill={colour:a.fillColour||"white"}}AppearanceProportionalToDimensions.prototype.createPath=function(){return new paper.Path({strokeWidth:this.stroke.width,strokeColor:this.stroke.colour,fillColor:this.fill.colour})};function BufferView(d,a,b){var c=b.createPath();c.moveTo({x:0,y:0});var f={x:a.wideSegmentWidth-b.stroke.width,y:a.halfHeight};c.lineTo(f);c=d.decorate(c,a,b);f.x=c.bounds.width;c.lineTo({x:0,y:a.height});c.closePath();c.alignmentCentre={x:a.wideSegmentWidth/2,y:a.halfHeight};c.inputs=[{x:0,y:a.halfHeight}];c.outputs=[f];return c};function DimensionsProportionalToWidth(d){this.width=d=d||100;this.wireWidth=d/5;this.gateWidth=d-2*this.wireWidth;this.height=4*this.gateWidth/5;this.halfHeight=this.height/2;this.wideSegmentWidth=3*this.gateWidth/5;this.narrowSegmentWidth=2*this.gateWidth/5;this.inverterRadius=this.gateWidth/12};function GateView(d,a,b){d=new d(a,b);var c=a.width/2-d.alignmentCentre.x+d.inputs[0].x/2,f=[];f.push(d);a=new paper.Path.Line({from:d.outputs[0],to:{x:a.width-c+d.inputs[0].x,y:d.outputs[0].y},strokeWidth:b.wireStrokeWidth,strokeColor:b.stroke.colour});for(var e=0;e<d.inputs.length;e++){var h=d.inputs[e];f.push(new paper.Path.Line({from:{x:h.x-c,y:h.y},to:{x:h.x,y:h.y},strokeWidth:b.wireStrokeWidth,strokeColor:b.stroke.colour}))}f.push(a);return new paper.Group(f)};function render(){function d(b){return GateView.bind(null,b)}function a(){}function b(){}paper.project.activeLayer.removeChildren();a.prototype.decorate=function(b,a,c){a=2*a.inverterRadius;b.arcBy({x:a,y:0},!1);b.arcBy({x:-a,y:0},!0);b.arcBy({x:a,y:0},!0);b.arcBy({x:-a,y:0},!1);return b};b.prototype.decorate=function(b,a,c){return b};var c=[d(BufferView.bind(null,new b)),d(BufferView.bind(null,new a)),d(AndView.bind(null,new b)),d(AndView.bind(null,new a)),d(OrView.bind(null,new b,new b)),d(OrView.bind(null,
new b,new a)),d(OrView.bind(null,new XorDecoration,new b)),d(OrView.bind(null,new XorDecoration,new a))],f=c.map(function(b){var a=new DimensionsProportionalToWidth,c=new AppearanceProportionalToDimensions(a);return new b(a,c)}),e=c.map(function(b){var a=new DimensionsProportionalToWidth(150),c=new AppearanceProportionalToDimensions(a);return new b(a,c)}),h=c.map(function(b){var a=new DimensionsProportionalToWidth(50),c=new AppearanceProportionalToDimensions(a);return new b(a,c)}),c=c.map(function(b){var a=
new DimensionsProportionalToWidth(20),c=new AppearanceProportionalToDimensions(a);return new b(a,c)}),l=null,m=null;e.map(function(a){if(null==l||a.bounds.width>l)l=a.bounds.width;if(null==m||a.bounds.height>m)m=a.bounds.height});var g=175,k=100;f.map(function(a){a.position={x:g,y:k};g+=l;g>2.5*l&&(g=175,k+=m+10)});g=825;k=100;e.map(function(a){a.position={x:g,y:k};g+=l+50;g>7.5*l&&(g=825,k+=m+50)});g=100;k=500;h.map(function(a){a.position={x:g,y:k};g+=l/4+50;g>1.75*l&&(g=100,k+=m/4+50)});g=525;k=
100;c.map(function(a){a.position={x:g,y:k};g+=l/4+50;g>4.5*l&&(g=525,k+=m/4+50)})}
window.addEventListener("load",function(){var d=document.getElementById("paper");paper.setup(d);paper.view.onFrame=function(a){paper.view.draw()};paper.view.onResize=function(a){render()};render();(function(){function a(a){b=null}var b,c=new paper.Tool;c.attach("mousedown",function(a){b=a.point});c.attach("mousedrag",function(a){a=a.point;paper.view.center=new paper.Point(paper.view.center.x-(a.x-b.x),paper.view.center.y-(a.y-b.y))});c.attach("mouseup",a);c.attach("mouseout",a);return c})();(function(a){var b=
0;a.addEventListener("mousewheel",function(a){var d=b+a.wheelDelta,e;e=Math.pow(1.001,d);e=Math.min(Math.max(e,.01),100);e!=paper.view.zoom&&(b=d,paper.view.zoom=e);a.preventDefault();return!1})})(d)});function OrView(d,a,b,c){var f=b.gateWidth/7,e=c.createPath();e.moveTo({x:c.stroke.width/2,y:0});e.lineTo({x:b.narrowSegmentWidth,y:0});var h={x:b.gateWidth,y:b.halfHeight};e.arcTo({x:b.narrowSegmentWidth+b.wideSegmentWidth/2,y:b.halfHeight/4},h);e=a.decorate(e,b,c);h.x=e.bounds.width;e.arcTo({x:b.narrowSegmentWidth+b.wideSegmentWidth/2,y:b.height-b.halfHeight/4},{x:b.narrowSegmentWidth,y:b.height});e.lineTo({x:c.stroke.width/2,y:b.height});e.arcTo({x:f,y:b.halfHeight},{x:c.stroke.width/2,y:0});e.closePath();
e=d.decorate(e,b,c);e.alignmentCentre={x:b.gateWidth/2-f/2,y:b.halfHeight};d=b.height/4;e.inputs=[{x:f,y:d},{x:f,y:b.height-d}];e.outputs=[h];return e};function XorDecoration(){}XorDecoration.prototype.decorate=function(d,a,b){var c=a.gateWidth/7,f=b.createPath(),e=2*b.stroke.width,h=1.2*(b.stroke.width/2-e),c=c-e;b=b.stroke.width/10;f.moveTo({x:h+b,y:0});f.lineTo({x:h,y:0});f.arcTo({x:c,y:a.halfHeight},{x:h,y:a.height});f.lineTo({x:h+b,y:a.height});f.arcTo({x:c,y:a.halfHeight},{x:h,y:0});f.lineTo({x:h+b,y:0});f.arcTo({x:c,y:a.halfHeight},{x:h,y:a.height});return new paper.Group([d,f])};
