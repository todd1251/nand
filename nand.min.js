function AndView(d,c,a){var b=a.createPath();b.moveTo({x:0,y:0});b.lineTo({x:c.wideSegmentWidth,y:0});var e={x:c.gateWidth,y:c.halfHeight};b.arcTo({x:c.wideSegmentWidth+1,y:0},e);b=d.decorate(b,c,a);e.x=b.bounds.width;b.arcTo({x:c.wideSegmentWidth+1,y:c.height},{x:c.wideSegmentWidth,y:c.height});b.lineTo({x:0,y:c.height});b.closePath();b.alignmentCentre={x:c.gateWidth/2,y:c.halfHeight};d=c.height/4;b.inputs=[{x:0,y:d},{x:0,y:c.height-d}];b.outputs=[e];return b};function AppearanceProportionalToDimensions(d,c){c=c||{};this.stroke={width:c.strokeWidth||d.width/25,colour:c.strokeColour||"black"};this.wireStrokeWidth=.5*this.stroke.width;this.fill={colour:c.fillColour||"white"}}AppearanceProportionalToDimensions.prototype.createPath=function(){return new paper.Path({strokeWidth:this.stroke.width,strokeColor:this.stroke.colour,fillColor:this.fill.colour})};function BufferView(d,c,a){var b=a.createPath();b.moveTo({x:0,y:0});var e={x:c.wideSegmentWidth-a.stroke.width,y:c.halfHeight};b.lineTo(e);b=d.decorate(b,c,a);e.x=b.bounds.width;b.lineTo({x:0,y:c.height});b.closePath();b.alignmentCentre={x:c.wideSegmentWidth/2,y:c.halfHeight};b.inputs=[{x:0,y:c.halfHeight}];b.outputs=[e];return b};function DimensionsProportionalToWidth(d){this.width=d=d||100;this.wireWidth=d/5;this.gateWidth=d-2*this.wireWidth;this.height=4*this.gateWidth/5;this.halfHeight=this.height/2;this.wideSegmentWidth=3*this.gateWidth/5;this.narrowSegmentWidth=2*this.gateWidth/5;this.inverterRadius=this.gateWidth/12};function GateView(d,c,a){d=new d(c,a);var b=c.width/2-d.alignmentCentre.x+d.inputs[0].x/2,e=[];e.push(d);c=new paper.Path.Line({from:d.outputs[0],to:{x:c.width-b+d.inputs[0].x,y:d.outputs[0].y},strokeWidth:a.wireStrokeWidth,strokeColor:a.stroke.colour});for(var f=0;f<d.inputs.length;f++){var g=d.inputs[f];e.push(new paper.Path.Line({from:{x:g.x-b,y:g.y},to:{x:g.x,y:g.y},strokeWidth:a.wireStrokeWidth,strokeColor:a.stroke.colour}))}e.push(c);return new paper.Group(e)};function render(){function d(a){return GateView.bind(null,a)}function c(){}function a(){}paper.project.activeLayer.removeChildren();c.prototype.decorate=function(a,b,c){b=2*b.inverterRadius;a.arcBy({x:b,y:0},!1);a.arcBy({x:-b,y:0},!0);a.arcBy({x:b,y:0},!0);a.arcBy({x:-b,y:0},!1);return a};a.prototype.decorate=function(a,b,c){return a};var b=[d(BufferView.bind(null,new a)),d(BufferView.bind(null,new c)),d(AndView.bind(null,new a)),d(AndView.bind(null,new c)),d(OrView.bind(null,new a,new a)),d(OrView.bind(null,
new a,new c)),d(OrView.bind(null,new XorDecoration,new a)),d(OrView.bind(null,new XorDecoration,new c))],e=b.map(function(a){var b=new DimensionsProportionalToWidth,c=new AppearanceProportionalToDimensions(b);return new a(b,c)}),f=b.map(function(a){var b=new DimensionsProportionalToWidth(150),c=new AppearanceProportionalToDimensions(b);return new a(b,c)}),g=b.map(function(a){var b=new DimensionsProportionalToWidth(50),c=new AppearanceProportionalToDimensions(b);return new a(b,c)}),b=b.map(function(b){var a=
new DimensionsProportionalToWidth(20),c=new AppearanceProportionalToDimensions(a);return new b(a,c)}),k=null,m=null;f.map(function(a){if(null==k||a.bounds.width>k)k=a.bounds.width;if(null==m||a.bounds.height>m)m=a.bounds.height});var h=175,l=100;e.map(function(a){a.position={x:h,y:l};h+=k;h>2.5*k&&(h=175,l+=m+10)});h=825;l=100;f.map(function(a){a.position={x:h,y:l};h+=k+50;h>7.5*k&&(h=825,l+=m+50)});h=100;l=500;g.map(function(a){a.position={x:h,y:l};h+=k/4+50;h>1.75*k&&(h=100,l+=m/4+50)});h=525;l=
100;b.map(function(a){a.position={x:h,y:l};h+=k/4+50;h>4.5*k&&(h=525,l+=m/4+50)})}
window.addEventListener("load",function(){var d=document.getElementById("paper");paper.setup(d);paper.view.onFrame=function(c){paper.view.draw()};paper.view.onResize=function(c){render()};render();(function(){function c(b){a=null}var a,b=new paper.Tool;b.attach("mousedown",function(b){a=b.point});b.attach("mousedrag",function(b){b=b.point;paper.view.center=new paper.Point(paper.view.center.x-(b.x-a.x),paper.view.center.y-(b.y-a.y))});b.attach("mouseup",c);b.attach("mouseout",c);return b})();(function(c){var a=
0;c.addEventListener("mousewheel",function(b){var c=a+b.wheelDelta,d;d=Math.pow(1.001,c);d=Math.min(Math.max(d,.01),100);var g=paper.view.zoom;if(d!=g){var k=g/d,m=paper.view.viewToProject({x:b.offsetX,y:b.offsetY}),g=paper.view.center,h=m.subtract(g),k=m.subtract(h.multiply(k)).subtract(g);paper.view.center=g.add(k);a=c;paper.view.zoom=d}b.preventDefault();return!1})})(d)});function OrView(d,c,a,b){var e=a.gateWidth/7,f=b.createPath();f.moveTo({x:b.stroke.width/2,y:0});f.lineTo({x:a.narrowSegmentWidth,y:0});var g={x:a.gateWidth,y:a.halfHeight};f.arcTo({x:a.narrowSegmentWidth+a.wideSegmentWidth/2,y:a.halfHeight/4},g);f=c.decorate(f,a,b);g.x=f.bounds.width;f.arcTo({x:a.narrowSegmentWidth+a.wideSegmentWidth/2,y:a.height-a.halfHeight/4},{x:a.narrowSegmentWidth,y:a.height});f.lineTo({x:b.stroke.width/2,y:a.height});f.arcTo({x:e,y:a.halfHeight},{x:b.stroke.width/2,y:0});f.closePath();
f=d.decorate(f,a,b);f.alignmentCentre={x:a.gateWidth/2-e/2,y:a.halfHeight};d=a.height/4;f.inputs=[{x:e,y:d},{x:e,y:a.height-d}];f.outputs=[g];return f};function XorDecoration(){}XorDecoration.prototype.decorate=function(d,c,a){var b=c.gateWidth/7,e=a.createPath(),f=2*a.stroke.width,g=1.2*(a.stroke.width/2-f),b=b-f;a=a.stroke.width/10;e.moveTo({x:g+a,y:0});e.lineTo({x:g,y:0});e.arcTo({x:b,y:c.halfHeight},{x:g,y:c.height});e.lineTo({x:g+a,y:c.height});e.arcTo({x:b,y:c.halfHeight},{x:g,y:0});e.lineTo({x:g+a,y:0});e.arcTo({x:b,y:c.halfHeight},{x:g,y:c.height});return new paper.Group([d,e])};
