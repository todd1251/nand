function AndView(a){a=a||{};var b=a.strokeWidth||4,c=a.strokeColor||"black",f=a.width||100,d=3*f/5,e=4*f/5,h=e/2,g=new paper.Path.Arc({from:{x:d,y:0},through:{x:f,y:h},to:{x:d,y:e}});g.remove();a=new paper.Path({segments:[{x:0,y:0},{x:d,y:0},g.segments[0],g.segments[1],g.segments[2],{x:d,y:e},{x:0,y:e}],closed:!0,strokeWidth:b,strokeColor:c,fillColor:a.fillColor||"white"});d=e/4;g=f/2;f=new paper.Path.Line({from:{x:-(b/2),y:d},to:{x:-(g+b),y:d},strokeWidth:b,strokeColor:c});e=new paper.Path.Line({from:{x:-(b/
2),y:e-d},to:{x:-(g+b),y:e-d},strokeWidth:b,strokeColor:c});b=new paper.Path.Line({from:{x:a.bounds.width,y:h},to:{x:a.bounds.width+g+b/2,y:h},strokeWidth:b,strokeColor:c});b=new paper.Group([f,e,a,b]);b.gateWidth=a.bounds.width;return b};function BufferView(a){a=a||{};var b=a.strokeWidth||4,c=a.strokeColor||"black",f=a.width||100,d=4*f/5,e=d/2;a=new paper.Path({segments:[{x:0,y:0},{x:3*f/5,y:e},{x:0,y:d}],closed:!0,strokeWidth:b,strokeColor:c,fillColor:a.fillColor||"white"});d=f/2;f=new paper.Path.Line({from:{x:-(b/2),y:e},to:{x:-(d+b),y:e},strokeWidth:b,strokeColor:c});b=new paper.Path.Line({from:{x:a.bounds.width,y:e},to:{x:a.bounds.width+d+b/2,y:e},strokeWidth:b,strokeColor:c});b=new paper.Group([f,a,b]);b.gateWidth=a.bounds.width;
return b};function InverterView(a){a=a||{};return new paper.Path.Circle({radius:a.radius||12.5,strokeWidth:a.strokeWidth||4,strokeColor:a.strokeColor||"black",fillColor:a.fillColor||"white"})};function NandView(a){a=a||{};var b=new AndView(a),c=b.gateWidth/6;a.radius=c/2;a=new InverterView(a);a.position={x:b.gateWidth+c/2+1,y:b.bounds.height/2};return new paper.Group([b,a])};function NorView(a){a=a||{};var b=new OrView(a),c=b.bounds.width/6;a.radius=c/2;a=new InverterView(a);a.position={x:b.bounds.width+c/2+1,y:b.bounds.height/2};return new paper.Group([b,a])};function NotView(a){a=a||{};var b=new BufferView(a),c=5*b.gateWidth/3/6;a.radius=c/2;a=new InverterView(a);a.position={x:b.gateWidth+c/2+1,y:b.bounds.height/2};return new paper.Group([b,a])};function OrView(a){a=a||{};var b=a.width||100,c=.4*b,f=.6*b,d=b/7,e=4*b/5,h=e/2,g=new paper.Path.Arc({from:{x:c,y:0},through:{x:c+f/2,y:h/4},to:{x:b,y:h}});g.remove();b=new paper.Path.Arc({from:{x:b,y:h},through:{x:c+f/2,y:e-h/4},to:{x:c,y:e}});b.remove();d=new paper.Path.Arc({from:{x:0,y:e},through:{x:d,y:h},to:{x:0,y:0}});d.remove();return new paper.Path({segments:[{x:0,y:0},{x:c,y:0},g.segments[0],g.segments[1],b.segments[0],b.segments[1],{x:c,y:e},{x:0,y:e},d.segments[0],d.segments[1]],closed:!0,
strokeWidth:a.strokeWidth||4,strokeColor:a.strokeColor||"black",fillColor:a.fillColor||"white"})};function XNorView(a){a=a||{};var b=new XorView(a),c=b.bounds.width/6;a.radius=c/2;a=new InverterView(a);a.position={x:b.bounds.width-c/2+c/2+1,y:b.bounds.height/2};return new paper.Group([b,a])};function XorView(a){a=a||{};var b=new OrView(a),c=b.bounds.width/7,f=.6*c,d=b.bounds.height,c=new paper.Path.Arc({from:{x:-f,y:0},through:{x:c-.85*f,y:d/2},to:{x:-f,y:d}});c.remove();a=new paper.Path({segments:[{x:1-f,y:0},c.segments[0],c.segments[1],{x:1-f,y:d}],strokeWidth:a.strokeWidth||4,strokeColor:a.strokeColor||"black",fillColor:a.fillColor||"white"});return new paper.Group([b,a])};function render(){paper.project.activeLayer.removeChildren();(new BufferView).position={x:100,y:100};(new BufferView({width:150})).position={x:400,y:100};(new NotView).position={x:100,y:300};(new NotView({width:150})).position={x:400,y:300};(new AndView).position={x:700,y:100};(new AndView({width:150})).position={x:1E3,y:100};(new NandView).position={x:700,y:300};(new NandView({width:150})).position={x:1E3,y:300};(new OrView).position={x:100,y:500};(new OrView({width:150})).position={x:400,y:500};
(new NorView).position={x:100,y:700};(new NorView({width:150})).position={x:400,y:700};(new XorView).position={x:700,y:500};(new XorView({width:150})).position={x:1E3,y:500};(new XNorView).position={x:700,y:700};(new XNorView({width:150})).position={x:1E3,y:700}}
window.addEventListener("load",function(){paper.setup(document.getElementById("paper"));paper.view.onFrame=function(a){paper.view.draw()};paper.view.onResize=function(a){render()};var a;paper.view.onMouseDown=function(b){(b=paper.project.hitTest(b.point,{handles:!0,tolerance:5}))&&(a="handle-in"==b.type?b.segment.handleIn:b.segment.handleOut)};(new paper.Tool).onMouseDrag=function(b){a&&(a.x+=b.delta.x,a.y+=b.delta.y,console.log("x: "+a.x+", y: "+a.y))};render()});
