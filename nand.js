(function(){function d(){this.commands=[]}function v(a,b,c,e,d){this.model=a;this.width=b;this.height=c;this.heavyStrokeWidth=e;this.lightStrokeWidth=d;this.labels=[]}function g(a){this.logic=a;this.inputs=[]}function m(a){this.value=a}function f(a,b){this.inputs=a;this.output=b}function n(a){return!a.reduce(function(a,c){return a&&c})}d.prototype.moveTo=function(a,b){this.commands.push("M"+a+","+b);return this};d.prototype.lineTo=function(a,b){this.commands.push("L"+a+","+b);return this};d.prototype.arc=
function(a,b,c,e,d,h,k){this.commands.push("A"+a+","+b+" "+c+" "+e+" "+d+" "+h+","+k);return this};d.prototype.close=function(){this.commands.push("Z");return this};d.prototype.toPath=function(a){return a.path(this.commands.join(" "))};v.prototype.render=function(a,b,c){var e=this.width/2;(new d).moveTo(a,b).lineTo(a+e,b).arc(1,1,0,0,1,a+e,b+this.height).lineTo(a,b+this.height).close().toPath(c).attr("stroke-width",this.heavyStrokeWidth);var f=.05*this.width,h=this.height/2,e=a+e+h+f+this.heavyStrokeWidth/
2,h=b+h;c.circle(e,h,f).attr("stroke-width",this.lightStrokeWidth);var k=.2*this.height,p=.3*this.width;(new d).moveTo(a,b+k).lineTo(a-p,b+k).toPath(c).attr("stroke-width",this.lightStrokeWidth);c.circle(a-p,b+k,7.5).attr("fill","white");this.labels[0]=c.text(a-p,b+k,this.model.inputs[0]);(new d).moveTo(a,b+this.height-k).lineTo(a-p,b+this.height-k).toPath(c).attr("stroke-width",this.lightStrokeWidth);c.circle(a-p,b+this.height-k,7.5).attr("fill","white");this.labels[1]=c.text(a-p,b+this.height-k,
this.model.inputs[1]);this.outputWire={x:e+p,y:h};(new d).moveTo(e+f,h).lineTo(e+p,h).toPath(c).attr("stroke-width",this.lightStrokeWidth);null!=this.model.output&&(c.circle(e+p,h,7.5).attr("fill","white"),this.labels[2]=c.text(e+p,h,this.model.output))};g.prototype.inputs=function(a){this.inputs=a};g.prototype.evaluate=function(){if(2>this.inputs.length)throw"inputs";var a=[];this.inputs.map(function(b){a.push(b.evaluate())});return this.logic(a)};m.prototype.evaluate=function(){return this.value};
window.addEventListener("load",function(){function a(){0>q?q=0:3<q&&(q=3);document.getElementById("time").textContent="t = "+q;var g=new f(["?","?"],null),r=new f(["?","?"],null),m=new f(["?","?"],"?"),l=new f(["?","?"],null),u=new f(["?","?"],null),t=new f(["?","?"],null);0<=q&&(r=new f([z.inputs[0].evaluate()?"1":"0",z.inputs[1].evaluate()?"1":"0"],null),l=new f([y.inputs[0].evaluate()?"1":"0",y.inputs[1].evaluate()?"1":"0"],null),t=new f([A.inputs[0].evaluate()?"1":"0",A.inputs[1].evaluate()?"1":
"0"],null));1<=q&&(g=new f([B.inputs[0].evaluate()?"1":"0",B.inputs[1].evaluate()?"1":"0"],null),u=new f([C.inputs[0].evaluate()?"1":"0",C.inputs[1].evaluate()?"1":"0"],null));2<=q&&(m=new f([w.inputs[0].evaluate()?"1":"0",w.inputs[1].evaluate()?"1":"0"],"?"));3<=q&&(m=new f([w.inputs[0].evaluate()?"1":"0",w.inputs[1].evaluate()?"1":"0"],w.evaluate()?"1":"0"));b.clear();var g=new v(g,60,40,2,1.25),r=new v(r,60,40,2,1.25),m=new v(m,60,40,2,1.25),l=new v(l,60,40,2,1.25),u=new v(u,60,40,2,1.25),t=new v(t,
60,40,2,1.25),n=b.width/2-g.width/2,x=(b.height-50)/2-g.height/2;t.render(n-90,x+12+80,b);(new d).moveTo(t.outputWire.x,t.outputWire.y).lineTo(t.outputWire.x,t.outputWire.y-20).toPath(b);r.render(n-90,x-12-15,b);l.render(n-90,x+12+20,b);(new d).moveTo(r.outputWire.x,r.outputWire.y).lineTo(r.outputWire.x,r.outputWire.y+15).toPath(b);(new d).moveTo(l.outputWire.x,l.outputWire.y).lineTo(l.outputWire.x,l.outputWire.y-15).toPath(b);(new d).moveTo(l.outputWire.x,l.outputWire.y).lineTo(l.outputWire.x,l.outputWire.y+
15).toPath(b);g.render(n,x,b);u.render(n,x+12+50,b);(new d).moveTo(u.outputWire.x,u.outputWire.y).lineTo(u.outputWire.x,u.outputWire.y-30).toPath(b);m.render(n+90,x+12,b);r.labels[0].click(function(){c.value="0"==this.attr("text");a()});r.labels[1].click(function(){e.value="0"==this.attr("text");a()});l.labels[0].click(function(){D.value="0"==this.attr("text");a()});l.labels[1].click(function(){h.value="0"==this.attr("text");a()});u.labels[0].click(function(){k.value="0"==this.attr("text");a()});
t.labels[0].click(function(){k.value="0"==this.attr("text");a()});t.labels[1].click(function(){p.value="0"==this.attr("text");a()})}var b=new Raphael(0,50,window.innerWidth,window.innerHeight-50),c=new m(!0),e=new m(!0),D=new m(!0),h=new m(!0),k=new m(!0),p=new m(!0),B=new g(n),z=new g(n),w=new g(n),y=new g(n),C=new g(n),A=new g(n);B.inputs=[z,y];z.inputs=[c,e];w.inputs=[B,C];y.inputs=[D,h];C.inputs=[y,A];A.inputs=[k,p];var q=0;a();document.getElementById("forward").addEventListener("click",function(){q++;
a()},!1);document.getElementById("backward").addEventListener("click",function(){q--;a()},!1)})})();
