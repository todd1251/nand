(function(){function l(){this.commands=[]}function n(a,b,g,c){this.width=a;this.height=b;this.heavyStrokeWidth=g;this.lightStrokeWidth=c;this.labels=[]}l.prototype.moveTo=function(a,b){this.commands.push("M"+a+","+b);return this};l.prototype.lineTo=function(a,b){this.commands.push("L"+a+","+b);return this};l.prototype.arc=function(a,b,g,c,d,e,f){this.commands.push("A"+a+","+b+" "+g+" "+c+" "+d+" "+e+","+f);return this};l.prototype.close=function(){this.commands.push("Z");return this};l.prototype.toPath=
function(a){return a.path(this.commands.join(" "))};n.prototype.render=function(a,b,g,c){var d=this.width/2;(new l).moveTo(a,b).lineTo(a+d,b).arc(1,1,0,0,1,a+d,b+this.height).lineTo(a,b+this.height).close().toPath(c).attr("stroke-width",this.heavyStrokeWidth);var e=.05*this.width,f=this.height/2,d=a+d+f+e+this.heavyStrokeWidth/2,f=b+f;c.circle(d,f,e).attr("stroke-width",this.lightStrokeWidth);var k=.2*this.height,h=.3*this.width;(new l).moveTo(a,b+k).lineTo(a-h,b+k).toPath(c).attr("stroke-width",
this.lightStrokeWidth);c.circle(a-h,b+k,7.5).attr("fill","white");this.labels[0]=c.text(a-h,b+k,"A");(new l).moveTo(a,b+this.height-k).lineTo(a-h,b+this.height-k).toPath(c).attr("stroke-width",this.lightStrokeWidth);c.circle(a-h,b+this.height-k,7.5).attr("fill","white");this.labels[1]=c.text(a-h,b+this.height-k,"B");this.outputWire={x:d+h,y:f};(new l).moveTo(d+e,f).lineTo(d+h,f).toPath(c).attr("stroke-width",this.lightStrokeWidth);g&&(c.circle(d+h,f,7.5).attr("fill","white"),this.labels[2]=c.text(d+
h,f,"C"))};window.addEventListener("load",function(){function a(){0>m?m=0:3<m&&(m=3);document.getElementById("time").textContent="t = "+m;p=!(h&&q);r=!(t&&u);v=!(p&&r);x=!(v&&w);c.labels[0].attr("text","?");c.labels[1].attr("text","?");e.labels[0].attr("text","?");e.labels[1].attr("text","?");g.labels[0].attr("text","?");g.labels[1].attr("text","?");d.labels[0].attr("text","?");d.labels[1].attr("text","?");d.labels[2].attr("text","?");0<=m&&(c.labels[0].attr("text",h?"1":"0"),c.labels[1].attr("text",
q?"1":"0"),e.labels[0].attr("text",t?"1":"0"),e.labels[1].attr("text",u?"1":"0"),d.labels[1].attr("text",w?"1":"0"));1<=m&&(g.labels[0].attr("text",p?"1":"0"),g.labels[1].attr("text",r?"1":"0"));2<=m&&d.labels[0].attr("text",v?"1":"0");3<=m&&d.labels[2].attr("text",x?"1":"0")}var b=new Raphael(0,50,window.innerWidth,window.innerHeight-50),g=new n(60,40,2,1.25),c=new n(60,40,2,1.25),d=new n(60,40,2,1.25),e=new n(60,40,2,1.25),f=b.width/2-g.width/2,k=(b.height-50)/2-g.height/2;c.render(f-90,k-12-15,
!1,b);e.render(f-90,k+12+15,!1,b);(new l).moveTo(c.outputWire.x,c.outputWire.y).lineTo(c.outputWire.x,c.outputWire.y+15).toPath(b);(new l).moveTo(e.outputWire.x,e.outputWire.y).lineTo(e.outputWire.x,e.outputWire.y-15).toPath(b);g.render(f,k,!1,b);d.render(f+90,k+12,!0,b);g.labels[0].attr("text","E");g.labels[1].attr("text","F");c.labels[0].attr("text","A");c.labels[1].attr("text","B");d.labels[0].attr("text","G");d.labels[1].attr("text","H");d.labels[2].attr("text","I");e.labels[0].attr("text","C");
e.labels[1].attr("text","D");var h=!1,q=!1,t=!1,u=!1,p=!1,r=!1,v=!1,w=!1,x=!1,m=0;a();c.labels[0].click(function(){h="0"==this.attr("text");a()});c.labels[1].click(function(){q="0"==this.attr("text");a()});e.labels[0].click(function(){t="0"==this.attr("text");a()});e.labels[1].click(function(){u="0"==this.attr("text");a()});d.labels[1].click(function(){w="0"==this.attr("text");a()});document.getElementById("forward").addEventListener("click",function(){m++;a()},!1);document.getElementById("backward").addEventListener("click",
function(){m--;a()},!1)})})();
